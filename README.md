# 幽默回应生成器

这是一个使用 AI 生成幽默回应的应用程序。

## 功能特性

- 🤖 **AI 智能生成**：基于不同强度级别生成幽默回复
- 🔐 **用户认证**：支持 Google 和 GitHub OAuth 登录
- 📱 **响应式设计**：完美适配手机和桌面端
- 💾 **云端历史记录**：登录用户的历史记录自动保存到云端
- 🔍 **智能搜索**：支持搜索和过滤历史记录
- 📋 **一键复制**：快速复制生成的回复
- 🎯 **强度调节**：3个等级的回击强度（温和、机智、犀利）
- 🔄 **多设备同步**：历史记录在所有设备间自动同步
- 🛡️ **数据安全**：行级安全策略保护用户隐私

## 最新功能亮点 ✨

### 🎯 **AI 回复质量优化**
- **纯中文输出**：彻底解决中英文夹杂问题，强化纯中文要求
- **无引号干扰**：自动清理AI生成的多余引号，输出干净的完整句子
- **稳定3条回复**：智能备用机制确保总是生成3条高质量回复
- **风格匹配**：备用回复根据强度级别自动匹配相应风格

### 🚀 **云端历史记录系统**
- **专门管理页面**：`/history` 路径提供完整的历史记录管理界面
- **智能搜索过滤**：按内容搜索，按强度级别（温和/机智/犀利）过滤
- **完整CRUD操作**：查看、搜索、删除、重用历史记录
- **实时数据同步**：新设备登录立即显示云端历史记录
- **双重存储机制**：本地存储+云端数据库，确保快速响应和数据持久化

### 🎨 **用户体验升级**
- **优雅降级**：云端服务失败时本地功能仍可正常使用
- **智能合并**：本地和云端历史记录自动合并去重
- **快速重用**：点击历史记录一键填充到输入框
- **视觉优化**：强度级别彩色标签，时间戳显示，操作按钮优化

## 技术架构

- **前端**：Next.js 15 + React 19 + TypeScript + Tailwind CSS
- **UI组件**：Shadcn/ui + Radix UI
- **后端**：Next.js API Routes + Supabase
- **数据库**：PostgreSQL (Supabase)
- **认证**：Supabase Auth (OAuth)
- **AI服务**：OpenRouter API (Llama 3.2)
- **部署**：Netlify (前端) + Supabase (后端)

## 使用说明

1. **游客模式**：无需登录即可使用基本功能，历史记录仅保存在本地
2. **登录模式**：登录后历史记录自动保存到云端，支持多设备同步
3. **历史记录页面**：点击右上角历史按钮或访问 `/history` 查看完整记录
4. **强度选择**：
   - 1-3级：温和暗讽，优雅回击
   - 4-7级：机智犀利，逻辑反击  
   - 8-10级：直白犀利，有力回击



## 开发日志

### 2025年6月19日 - 重大功能更新 🎉
**AI回复质量优化**
- ✅ 解决中英文夹杂问题：强化AI提示词，过滤英文内容
- ✅ 清理引号问题：自动移除AI生成的多余引号
- ✅ 稳定回复数量：智能备用机制确保总是生成3条回复
- ✅ 风格匹配优化：备用回复根据强度级别匹配相应风格

**云端历史记录系统**
- ✅ 数据库表设计：创建 `humor_responses` 表及相关索引
- ✅ 安全策略：实现行级安全策略，用户只能访问自己的数据
- ✅ API路由：完整的CRUD操作 (`/api/history`)
- ✅ 历史记录页面：专门的 `/history` 管理界面
- ✅ 搜索过滤功能：支持内容搜索和强度级别过滤
- ✅ 双重存储机制：本地+云端，确保数据安全和快速响应

**用户体验提升**
- ✅ 多设备同步：新设备登录立即显示云端历史
- ✅ 智能数据合并：本地和云端历史记录自动合并去重
- ✅ 优雅降级：云端失败时本地功能仍可用
- ✅ 界面优化：强度标签、时间显示、操作按钮改进

### 2025年6月4日
- 添加追踪代码 Plausible 和 Clarity



